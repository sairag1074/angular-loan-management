<app-navbar></app-navbar>
<div class="container mt-4 bg" style="background-color: #f5f5f5; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
    <div class="row">
        <!-- Outstanding Balance Section -->
        <div class="col-md-6 text-center mb-4 p-3 animated fadeIn" style="background: linear-gradient(135deg, #f8f9fa, #e0e0e0); transition: background 0.3s ease; border-radius: 10px;">
            <!-- <img src="C:\Users\10742980\angular-loan-management\src\assets\emojiofcash.png" alt="cash" height="40px" width="40px"> -->
            <h1 class="display-4 text-primary font-weight-bold">₹{{outStandingBalance}}</h1>
            <h3 class="text-muted font-italic">Outstanding Balance</h3>
            <div class="mt-3 d-flex justify-content-center">
                <!-- <button class="btn btn-primary mr-2">Update</button> -->
                 <!-- Button trigger modal -->
<button type="button" class="btn btn-outline-primary btn-lg rounded-pill" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Update
  </button>
  <!-- Modal -->
  <div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="margin-top: 50px;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          <form [formGroup]="updateForm"  (ngSubmit)="onSubmit()">
            <div class="mb-3">
              <label for="panid" class="form-label">LoanID:</label>
              <div class="input-group">
                <input type="text" class="form-control" id="LoanID" [value]="loanDetails.loanId" readonly />
                </div>
             
            </div>
            <div class="mb-3">
              <label for="otp" class="form-label">Loan Amount:</label>
              <div class="input-group">
                <input type="text" class="form-control" id="updatedLoanAmount" formControlName="updatedLoanAmount" placeholder="Enter loan amount" required />
              </div>
             
            </div>
            <div class="mb-3">
              <label for="tenureInMOnths" class="form-label">Loan Tenure (in Months):</label>
              <div class="input-group">
                <input type="text" class="form-control" id="updatedTenureInMonths" formControlName="updatedTenureInMonths" placeholder="Enter tenure of months" required />
              </div>
             
            </div>
   
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary" >Update Loan</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
            
            </div><br>
            <button class="btn btn-success ml-2" (click)="makePayment()">Part Payment</button>
        </div>

        <!-- Graph Section -->
        <div class="col-md-6 mb-4 p-3 animated fadeInUp" style="background: linear-gradient(135deg, #e9ecef, #d6d6d6); transition: background 0.3s ease; border-radius: 10px;">
            <canvas id="MyChart"></canvas>
        </div>
    </div>

<!-- Cards Section -->
<div class="row mt-4">
    <div class="col-md-2 mb-2">
        <div class="card text-center" style="background: linear-gradient(135deg, #f8f9fa, #e0e0e0); border-radius: 10px;">
            <div class="card-body">
                <h5 class="card-title">Total EMI</h5>
                <p class="card-text">₹{{120}}</p>
            </div>
        </div>
    </div>
    <div class="col-md-2 mb-4">
        <div class="card text-center" style="background: linear-gradient(135deg, #f8f9fa, #e0e0e0); border-radius: 10px;">
            <div class="card-body">
                <h5 class="card-title">Pending EMIs</h5>
                <p class="card-text">{{102}}</p>
            </div>
        </div>
    </div>
    <div class="col-md-2 mb-4">
        <div class="card text-center" style="background: linear-gradient(135deg, #f8f9fa, #e0e0e0); border-radius: 10px;">
            <div class="card-body">
                <h5 class="card-title">Loan Amount</h5>
                <p class="card-text">₹{{this.TotalBorrowings}}</p>
            </div>
        </div>
    </div>
    <div class="col-md-2 mb-4">
        <div class="card text-center" style="background: linear-gradient(135deg, #f8f9fa, #e0e0e0); border-radius: 10px;">
            <div class="card-body">
                <h5 class="card-title">EMI</h5>
                <p class="card-text">₹{{this.monthlyEMIMoney}}</p>
            </div>
        </div>
    </div>
    <div class="col-md-2 mb-4">
        <div class="card text-center" style="background: linear-gradient(135deg, #f8f9fa, #e0e0e0); border-radius: 10px;">
            <div class="card-body">
                <h5 class="card-title">Interest Rate</h5>
                <p class="card-text">{{8.5}}%</p>
            </div>
        </div>
    </div>
</div>


    <!-- Upcoming Dues Section -->
    <div>
        <h3 class="mb-3 text-info font-weight-bold">Upcoming Dues...</h3>
        <table class="table table-striped table-hover animated fadeInRight" style="background: linear-gradient(135deg, #ffffff, #f0f8ff); border-radius: 10px;">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Due Date</th>
                    <th scope="col">Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let number of numbers; let i=index" style="color: green;">
                    <td>05 {{monthCalculator(i)}} '{{ yearCalculator(i)}}</td>
                    <td>₹{{monthlyEMIMoney}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>